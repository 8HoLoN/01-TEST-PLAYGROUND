<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ES Features</title>

    <style>
        table,
        th,
        td {
            border: 1px solid black;
        }


        table {
            color: #333;
            font-family: Helvetica, Arial, sans-serif;
            _width: 640px;
            width: 98%;
            border-collapse:
                collapse;
            border-spacing: 0;
        }

        td,
        th {
            border: 1px solid transparent;
            /* No more visible border */
            height: 30px;
            transition: all 0.3s;
            /* Simple transition for hover effect */
        }

        th {
            background: #DFDFDF;
            /* Darken header a bit */
            font-weight: bold;
        }

        td {
            background: #FAFAFA;
            text-align: center;
        }

        /* Cells in even rows (2,4,6...) are one color */
        tr:nth-child(even) td {
            background: #F1F1F1;
        }

        /* Cells in odd rows (1,3,5...) are another (excludes header cells)  */
        tr:nth-child(odd) td {
            background: #FEFEFE;
        }

        tr td:hover {
            _background: #666;
            _color: #FFF;
        }

        /* Hover cell effect! */
    </style>
</head>

<body>
    <div id="features"></div>
    plop
    <svg class="icon icon-flask" xmlns="http://www.w3.org/2000/svg" width="26" height="28" aria-hidden="true">
        <path
            d="M23.859 22.625C25.031 24.484 24.203 26 22 26H4c-2.203 0-3.031-1.516-1.859-3.375L10 10.234V4H9c-.547 0-1-.453-1-1s.453-1 1-1h8c.547 0 1 .453 1 1s-.453 1-1 1h-1v6.234zM11.688 11.297L7.438 18h11.125l-4.25-6.703-.313-.484V4h-2v6.813z" />
    </svg>
    ðŸ’¤
    <script>

        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis
        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining
        const mdn = 'https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/';

        const features = [
            ['Optional chaining', 'Global_Objects/globalThis'],
            ['Global this', 'Operators/Optional_chaining']
        ].map(_ => [
            _[0],
            _ => import(`./${_[0].toLowerCase().replace(/ /g, '-')}.js`).then(_ => _.default()).catch(_ => false),
            _[1]]
        );

        document.querySelector('#features').innerHTML = `
            <table>
                <thead>
                    <tr>
                        <th>Feature name</th>
                        <th>Availibility</th>
                    </tr>
                </thead>
                <tbody>
                    ${features.map(([featureName, featureTest, featureLink]) => `
                        <tr><td><a href="${mdn}${featureLink}">${featureName}</a></td><td id="${featureLink.replace(/\//g, '-')}">loading...</td></tr>
                    `).join('')}
                </tbody>
            </table>
            `;


        (async () => {

            const featureResults = await Promise.all(features.map(
                async ([featureName, featureTest, featureLink]) => [featureName, await featureTest(), featureLink]
            ));

            featureResults.map(([featureName, featureTest, featureLink]) => {
                document.querySelector(`#${featureLink.replace(/\//g, '-')}`).innerHTML = `${featureTest}`;
            });

        })();

        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis
        // https://ruanyf.github.io/es-checker/

        // ES10 ES2019
        // https://maksimivanov.com/posts/new-es10-es2019-javascript-features/
        // https://webapplog.com/es7-es8/
        // https://node.university/blog/15982/es7es8
        // https://github.com/tc39/proposals
        // 

        /*
        /*
        const features = {
            'Optional chaining': _ => import('./optional-chaining.js').then(_ => _.default()).catch(_ => false),
            'Global this': _ => import('./global-this.js').then(_ => _.default()).catch(_ => false)
        };
        //*/
        //*/


        // # private member

        // https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Symbol
        // https://stackoverflow.com/questions/21724326/what-is-the-motivation-for-bringing-symbols-to-es6
        // https://www.keithcirkel.co.uk/metaprogramming-in-es6-symbols/
        // http://www.zsoltnagy.eu/es6-symbols-and-its-use-cases/

        // https://medium.com/@madasamy/javascript-brief-history-and-ecmascript-es6-es7-es8-features-673973394df4
        // https://medium.com/@js_tut/the-complete-guide-to-es10-features-f09a8c7be1bd
    </script>
</body>

</html>
